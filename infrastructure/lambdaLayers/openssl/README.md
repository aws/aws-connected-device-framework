# OpenSSL Lambda Layer

The Amazon Linux v2 lambda container does not include the OpenSSL unlike Amazon Linux v1.  Therefore, for services that need to conusme it such as the CDF Bulk Certificates service, we now make OpenSSL available via a Lambda layer for when CDF is deployed upon the Lambda runtime.

Services that consume OpenSSL (via the `pem` node.js library) are:

 - auth-devicecert
 - auth-jwt
 - bulkcerts
 - certificateactivator
 - certificatevendor
 - provisioning

## Preparing:

```sh
$> infrastructure/package.bash
```

The above will use a Docker container to install OpenSSL upon an Amazon Linux v2 images, then zip it.

## Deploying:

```sh
$> infrastructure/deploy.bash
```

The above will take the `build.zip` generated by the package step and deploy as a Lambda Layer.